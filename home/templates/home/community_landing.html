{% extends "base.html" %}

{% block title %}
Outreachy internships working with {{ community.name }}
{% endblock %}

{% block content %}

{% include "home/snippet/eligibility_prompts.html" %}

<p><a href="/apply/">Why apply to Outreachy?</a> &gt;
{% if not request.user.comrade or request.user.comrade.needs_application %}
	<a href="{% url 'eligibility' %}">Check Eligibility</a>
{% elif request.user.comrade.ineligible_application or request.user.comrade.pending_application %}
	<a href="{% url 'eligibility-results' %}">Review Your Eligibility</a>
{% else %}
	<a href="/apply/eligibility/">Outreachy Eligibility Rules</a>
{% endif %}
&gt; <a href="/apply/project-selection/">Find a Mentor and Internship Project</a>
&gt; {{ community.name }}</p>

{% include "home/snippet/community_landing_snippet.html" %}

{% if approved_projects %}
	<h1>Open Projects</h1>
	<p>Mentors for these projects are willing to work with new Outreachy applicants. Please note that as the round goes on, mentors may close their project to new applicants because they are already working with many applicants. Make sure to contact a mentor and start your contribution as soon as possible!</p>
	{% for project in approved_projects %}
		<h2>{{ project.short_title }}</h2>
		{% if project.required_skills %}
		<p>Skills used or learned in this project:<p>
		<ul>
			{% for skill in project.required_skills %}
				<li>{{ skill.skill }}: {{ skill.get_experience_level_display }}</li>
			{% endfor %}
		</ul>
		{% endif %}
		{% if request.user.comrade.eligible_application %}
			<p><a class='btn btn-success' href="{% url 'contributions' round_slug=current_round.slug community_slug=community.slug project_slug=project.slug %}">Record Contibutions and Apply to This Project</a></p>
		{% endif %}
		{% if request.user.comrade.eligible_application or request.user.comrade.approved_mentor_or_coordinator %}
			<p><button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#project-open-{{ forloop.counter }}" aria-expanded="false" aria-controls="project{{ forloop.counter }}">
				Show Project Info
			</button></p>
			<div class="collapse" id="project-open-{{ forloop.counter }}">
				{% include "home/snippet/project_landing_snippet.html" %}
			</div>
		{% else %}
			<p>Project details are hidden, see message above.</p>
		{% endif %}
	{% endfor %}
{% endif %}

{% if closed_projects %}
	<h1>Closed Projects</h1>
	<p>These projects are closed to new applicants because the mentors are already working with many applicants. Applicants who are already working with a mentor are encouraged to complete their contributions and submit an application for the project.</p>
	{% for project in closed_projects %}
		<h2>{{ project.short_title }}</h2>
		{% if project.required_skills %}
		<p>Skills used or learned in this project:<p>
		<ul>
			{% for skill in project.required_skills %}
				<li>{{ skill.skill }}: {{ skill.get_experience_level_display }}</li>
			{% endfor %}
		</ul>
		{% endif %}
		{% if request.user.comrade.eligible_application %}
			<p><a class='btn btn-success' href="{% url 'contributions' round_slug=current_round.slug community_slug=community.slug project_slug=project.slug %}">Record Contibutions and Apply to This Project</a></p>
		{% endif %}
		{% if request.user.comrade.eligible_application or request.user.comrade.approved_mentor_or_coordinator %}
			<p><button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#project-closed-{{ forloop.counter }}" aria-expanded="false" aria-controls="project{{ forloop.counter }}">
				Show Project Info
			</button></p>
			<div class="collapse" id="project-closed-{{ forloop.counter }}">
				{% include "home/snippet/project_landing_snippet.html" %}
			</div>
		{% else %}
			<p>Project details are hidden, see message above.</p>
		{% endif %}
	{% endfor %}
{% endif %}

{% endblock %}
